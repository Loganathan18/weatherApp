{"ast":null,"code":"import _regeneratorRuntime from\"D:/IonicProjects/weather-App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/IonicProjects/weather-App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/IonicProjects/weather-App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonContent,IonPage,useIonViewDidEnter}from'@ionic/react';import'./Home.css';import{useEffect,useState}from'react';import Preloader from'../components/Preloader';import{Network}from'@capacitor/network';import*as Constants from'../common/Constants';import{Geolocation}from'@capacitor/geolocation';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=function Home(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showLoading=_useState2[0],setShowLoading=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),locationName=_useState4[0],setLocationName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),currentDate=_useState6[0],setCurrentDate=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),currentTemp=_useState8[0],setCurrentTemp=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),weather=_useState10[0],setWeather=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),realTemp=_useState12[0],setRealTemp=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),weatherIcon=_useState14[0],setWeatherIcon=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),weatherRes=_useState16[0],setWeatherRes=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),speed=_useState18[0],setSpeed=_useState18[1];var _useState19=useState(0),_useState20=_slicedToArray(_useState19,2),latitude=_useState20[0],setLatitude=_useState20[1];var _useState21=useState(0),_useState22=_slicedToArray(_useState21,2),longitude=_useState22[0],setLongitude=_useState22[1];useIonViewDidEnter(function(){var coordinates=Geolocation.getCurrentPosition();coordinates.then(function(data){setLatitude(data.coords.latitude);setLongitude(data.coords.longitude);});});useEffect(function(){setShowLoading(true);getWeatherData();},[longitude]);function getWeatherData(){return _getWeatherData.apply(this,arguments);}function _getWeatherData(){_getWeatherData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var status,api_id,result,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setShowLoading(true);_context.next=3;return Network.getStatus();case 3:status=_context.sent;if(!(status.connected&&status.connectionType===\"wifi\")){_context.next=13;break;}api_id=Constants.Configs.api_id;_context.next=8;return fetch(Constants.Configs.BASE_URL+'weather?lat='+latitude+'&lon='+longitude+'&appid='+api_id);case 8:result=_context.sent;_context.next=11;return result.json();case 11:data=_context.sent;//Utilities.persistWeatherData(data);\nsetWeatherRes(data);case 13:setShowLoading(false);case 14:case\"end\":return _context.stop();}}},_callee);}));return _getWeatherData.apply(this,arguments);}useEffect(function(){if((weatherRes===null||weatherRes===void 0?void 0:weatherRes.name)!=undefined)setLocationName(weatherRes.name);if((weatherRes===null||weatherRes===void 0?void 0:weatherRes.dt)!=undefined){var date=new Date(weatherRes.dt*1000);setCurrentDate(date.getDate()+\"/\"+(date.getMonth()+1)+\"/\"+date.getFullYear());}if((weatherRes===null||weatherRes===void 0?void 0:weatherRes.main.temp)!=undefined){setCurrentTemp((weatherRes.main.temp-273.15)*9/5+32);}if((weatherRes===null||weatherRes===void 0?void 0:weatherRes.main.feels_like)!=undefined){setRealTemp((weatherRes.main.feels_like-273.15)*9/5+32);}if((weatherRes===null||weatherRes===void 0?void 0:weatherRes.weather[0].main)!=undefined){setWeather(weatherRes===null||weatherRes===void 0?void 0:weatherRes.weather[0].main);}if((weatherRes===null||weatherRes===void 0?void 0:weatherRes.wind.speed)!=undefined){setSpeed(weatherRes===null||weatherRes===void 0?void 0:weatherRes.wind.speed);}if((weatherRes===null||weatherRes===void 0?void 0:weatherRes.weather[0].icon)!=undefined){var iconUrl=\"http://openweathermap.org/img/w/\"+(weatherRes===null||weatherRes===void 0?void 0:weatherRes.weather[0].icon)+\".png\";setWeatherIcon(iconUrl);}},[weatherRes]);return/*#__PURE__*/_jsx(IonPage,{children:/*#__PURE__*/_jsxs(IonContent,{fullscreen:true,children:[/*#__PURE__*/_jsx(Preloader,{isOpen:showLoading,onDidDismiss:function onDidDismiss(){return setShowLoading(false);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"osahan-success vh-100 bg-weather\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-5 text-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"icofont-check-circled display-1 text-warning\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-white font-weight-bold\",children:locationName}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white font-weight-light\",children:\"Today's Weather\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white font-weight-light\",children:currentDate})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-white weather-text\",children:[currentTemp.toFixed(2),/*#__PURE__*/_jsx(\"sup\",{children:\"\\xB0 F\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white font-weight-light\",children:weather}),/*#__PURE__*/_jsx(\"img\",{className:\"img-fluid\",src:weatherIcon})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 row mt-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-white font-weight-light col-6 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Wind\"}),speed,\" m/sec\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-white font-weight-light col-6 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Real Feel\"}),realTemp.toFixed(2),/*#__PURE__*/_jsx(\"sup\",{children:\"\\xB0 F\"})]})]})]})]})});};export default Home;","map":{"version":3,"sources":["D:/IonicProjects/weather-App/src/pages/Home.tsx"],"names":["IonContent","IonPage","useIonViewDidEnter","useEffect","useState","Preloader","Network","Constants","Geolocation","Home","showLoading","setShowLoading","locationName","setLocationName","currentDate","setCurrentDate","currentTemp","setCurrentTemp","weather","setWeather","realTemp","setRealTemp","weatherIcon","setWeatherIcon","weatherRes","setWeatherRes","speed","setSpeed","latitude","setLatitude","longitude","setLongitude","coordinates","getCurrentPosition","then","data","coords","getWeatherData","getStatus","status","connected","connectionType","api_id","Configs","fetch","BASE_URL","result","json","name","undefined","dt","date","Date","getDate","getMonth","getFullYear","main","temp","feels_like","wind","icon","iconUrl","toFixed"],"mappings":"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","sourcesContent":["import { IonContent, IonHeader, IonPage, IonTitle, IonToolbar, useIonViewDidEnter, useIonViewWillEnter } from '@ionic/react';\nimport ExploreContainer from '../components/ExploreContainer';\nimport './Home.css';\n\nimport { useEffect, useState } from 'react';\nimport * as ServerAPI from '../common/ServerAPI';\nimport Preloader from '../components/Preloader';\nimport {Network} from '@capacitor/network';\nimport * as Constants from '../common/Constants';\nimport * as Utilities from '../common/Utilities';\nimport { Geolocation } from '@capacitor/geolocation';\nconst Home: React.FC = () => {\n  \n  const [showLoading, setShowLoading] = useState(false);\n  const [locationName,setLocationName] = useState(\"\");\n  const [currentDate,setCurrentDate] = useState(\"\");\n  const [currentTemp,setCurrentTemp] = useState(0);\n  const [weather,setWeather] = useState(\"\");\n  const [realTemp,setRealTemp] = useState(0);\n  const [weatherIcon,setWeatherIcon] = useState(\"\");\n  const [weatherRes,setWeatherRes] = useState<ServerAPI.WeatherRes>();\n  const [speed,setSpeed] = useState(\"\");\n  const [latitude, setLatitude] = useState(0);\n  const [longitude, setLongitude] = useState(0);\n\n  useIonViewDidEnter(()=>{\n    const coordinates = Geolocation.getCurrentPosition();\n    coordinates.then(data=>{\n      setLatitude(data.coords.latitude);\n      setLongitude(data.coords.longitude);\n    });\n  });\n  useEffect(()=>{\n    setShowLoading(true);\n    getWeatherData();\n  },[longitude]);\n  \n  async function getWeatherData() {\n    setShowLoading(true);\n    const status = await Network.getStatus();\n    \n    if(status.connected && status.connectionType===\"wifi\"){\n      let api_id = Constants.Configs.api_id;\n      const result = await fetch(Constants.Configs.BASE_URL+'weather?lat='+latitude+'&lon='+longitude+'&appid='+api_id);\n      const data = await result.json();\n      //Utilities.persistWeatherData(data);\n      setWeatherRes(data);\n    }\n    setShowLoading(false);\n  }\n  useEffect(()=>{\n    if(weatherRes?.name!=undefined)\n      setLocationName(weatherRes.name);\n    if(weatherRes?.dt!=undefined){\n      var date = new Date(weatherRes.dt*1000);\n      setCurrentDate(date.getDate()+\"/\"+(date.getMonth()+1)+\"/\"+date.getFullYear());\n    }\n    if(weatherRes?.main.temp!=undefined){\n      setCurrentTemp((weatherRes.main.temp - 273.15) *9/5 + 32);\n    }\n\n    if(weatherRes?.main.feels_like!=undefined){\n      setRealTemp((weatherRes.main.feels_like - 273.15) *9/5 + 32);\n    }\n    if(weatherRes?.weather[0].main!=undefined){\n      setWeather(weatherRes?.weather[0].main);\n    }\n\n    if(weatherRes?.wind.speed!=undefined){\n      setSpeed(weatherRes?.wind.speed);\n    }\n\n    if(weatherRes?.weather[0].icon!=undefined){\n      var iconUrl = \"http://openweathermap.org/img/w/\" + weatherRes?.weather[0].icon + \".png\";\n      setWeatherIcon(iconUrl);\n    }\n\n  },[weatherRes]);\n  \n  \n  return (\n    <IonPage>\n      <IonContent fullscreen>\n        <Preloader isOpen={showLoading} onDidDismiss={() => setShowLoading(false)} />\n        <div className=\"osahan-success vh-100 bg-weather\">\n          <div className=\"p-5 text-center\">\n              <i className=\"icofont-check-circled display-1 text-warning\"></i>\n              <h1 className=\"text-white font-weight-bold\">{locationName}</h1>\n              <p className=\"text-white font-weight-light\">Today's Weather</p>\n              <p className=\"text-white font-weight-light\">{currentDate}</p>\n              \n          </div>\n          <div className=\"text-center\">\n            <p className=\"text-white weather-text\">{currentTemp.toFixed(2)}<sup>&#176; F</sup></p>\n            <p className=\"text-white font-weight-light\">{weather}</p>\n            <img className=\"img-fluid\" src={weatherIcon}/>\n\n            \n          </div>\n          <div className=\"col-12 row mt-5\">\n            <div className=\"text-white font-weight-light col-6 text-center\">\n              <p>Wind</p>\n              {speed} m/sec\n            </div>\n            <div className=\"text-white font-weight-light col-6 text-center\">\n              <p>Real Feel</p>\n              {realTemp.toFixed(2)}<sup>&#176; F</sup>\n            </div>\n            \n          </div>\n        </div>\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}