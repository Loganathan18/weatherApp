{"ast":null,"code":"import axios from 'axios';\nimport * as Constants from './Constants';\nimport { Network } from '@capacitor/network';\nconst APIMethods = {\n  GET: \"GET\",\n  POST: \"POST\",\n  PUT: \"PUT\",\n  DELETE: \"DELETE\"\n};\nexport const APIResult = {\n  SUCCESS: \"true\",\n  FAILURE: \"false\"\n};\nexport const getWeatherReport = async (longtitude, latitude) => {\n  let data = {};\n  let api_id = Constants.Configs.api_id;\n  return executeAPI('weather?lat=' + latitude + '&lon=' + longtitude + '&appid=' + api_id, APIMethods.GET, false, data);\n};\n\nconst executeAPI = async (endpoint, method, authRequired, data, params) => {\n  const status = await Network.getStatus();\n\n  if (status.connected && status.connectionType === \"wifi\") {\n    let headers = {};\n\n    if (method === APIMethods.POST || method === APIMethods.PUT) {\n      headers['Content-Type'] = 'application/x-www-form-urlencoded';\n    }\n\n    headers['Access-Control-Allow-Origin'] = '*';\n    headers['Access-Control-Allow-Methods'] = 'DELETE, POST, GET, OPTIONS';\n    headers['Access-Control-Allow-Headers'] = 'Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With';\n\n    try {\n      const response = await axios({\n        method: method,\n        url: Constants.Configs.BASE_URL + endpoint,\n        data: data,\n        headers: headers,\n        params: params\n      });\n      console.log(response.data);\n      return response.data;\n    } catch (error) {\n      return {\n        success: false,\n        message: 'Error Occurred in the Request!'\n      };\n    }\n  } else {\n    alert(\"No Internet Connection\");\n  }\n};","map":{"version":3,"sources":["D:/IonicProjects/weather-App/src/common/ServerAPI.tsx"],"names":["axios","Constants","Network","APIMethods","GET","POST","PUT","DELETE","APIResult","SUCCESS","FAILURE","getWeatherReport","longtitude","latitude","data","api_id","Configs","executeAPI","endpoint","method","authRequired","params","status","getStatus","connected","connectionType","headers","response","url","BASE_URL","console","log","error","success","message","alert"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,SAAZ,MAA2B,aAA3B;AAEA,SAASC,OAAT,QAAwB,oBAAxB;AAEA,MAAMC,UAAU,GAAG;AACfC,EAAAA,GAAG,EAAE,KADU;AAEfC,EAAAA,IAAI,EAAE,MAFS;AAGfC,EAAAA,GAAG,EAAE,KAHU;AAIfC,EAAAA,MAAM,EAAE;AAJO,CAAnB;AAOA,OAAO,MAAMC,SAAS,GAAG;AACrBC,EAAAA,OAAO,EAAE,MADY;AAErBC,EAAAA,OAAO,EAAE;AAFY,CAAlB;AAiDP,OAAO,MAAMC,gBAAgB,GAAG,OAAOC,UAAP,EAA2BC,QAA3B,KAAgD;AAC5E,MAAIC,IAA0B,GAAG,EAAjC;AACA,MAAIC,MAAM,GAAGd,SAAS,CAACe,OAAV,CAAkBD,MAA/B;AACA,SAAOE,UAAU,CAAC,iBAAeJ,QAAf,GAAwB,OAAxB,GAAgCD,UAAhC,GAA2C,SAA3C,GAAqDG,MAAtD,EAA8DZ,UAAU,CAACC,GAAzE,EAA8E,KAA9E,EAAqFU,IAArF,CAAjB;AACH,CAJM;;AAMP,MAAMG,UAAU,GAAG,OAAOC,QAAP,EAAyBC,MAAzB,EAAsCC,YAAtC,EAA8DN,IAA9D,EAA0EO,MAA1E,KAA2F;AAC1G,QAAMC,MAAM,GAAG,MAAMpB,OAAO,CAACqB,SAAR,EAArB;;AAEA,MAAGD,MAAM,CAACE,SAAP,IAAoBF,MAAM,CAACG,cAAP,KAAwB,MAA/C,EAAsD;AAClD,QAAIC,OAA6B,GAAG,EAApC;;AACA,QAAIP,MAAM,KAAKhB,UAAU,CAACE,IAAtB,IAA8Bc,MAAM,KAAKhB,UAAU,CAACG,GAAxD,EAA6D;AACzDoB,MAAAA,OAAO,CAAC,cAAD,CAAP,GAA0B,mCAA1B;AACH;;AACDA,IAAAA,OAAO,CAAC,6BAAD,CAAP,GAAyC,GAAzC;AACAA,IAAAA,OAAO,CAAC,8BAAD,CAAP,GAA0C,4BAA1C;AACAA,IAAAA,OAAO,CAAC,8BAAD,CAAP,GAA0C,6EAA1C;;AACA,QAAI;AACA,YAAMC,QAAQ,GAAG,MAAM3B,KAAK,CAAC;AACzBmB,QAAAA,MAAM,EAAEA,MADiB;AAEzBS,QAAAA,GAAG,EAAE3B,SAAS,CAACe,OAAV,CAAkBa,QAAlB,GAA6BX,QAFT;AAGzBJ,QAAAA,IAAI,EAAEA,IAHmB;AAIzBY,QAAAA,OAAO,EAAEA,OAJgB;AAKzBL,QAAAA,MAAM,EAAEA;AALiB,OAAD,CAA5B;AAOAS,MAAAA,OAAO,CAACC,GAAR,CAAYJ,QAAQ,CAACb,IAArB;AACA,aAAOa,QAAQ,CAACb,IAAhB;AACH,KAVD,CAUE,OAAOkB,KAAP,EAAc;AACZ,aAAO;AAAEC,QAAAA,OAAO,EAAE,KAAX;AAAkBC,QAAAA,OAAO,EAAE;AAA3B,OAAP;AACH;AACJ,GArBD,MAqBO;AACHC,IAAAA,KAAK,CAAC,wBAAD,CAAL;AACH;AAEJ,CA5BD","sourcesContent":["import axios from 'axios';\nimport * as Constants from './Constants';\nimport * as Utilities from './Utilities';\nimport { Network } from '@capacitor/network';\n\nconst APIMethods = {\n    GET: \"GET\",\n    POST: \"POST\",\n    PUT: \"PUT\",\n    DELETE: \"DELETE\"\n}\n\nexport const APIResult = {\n    SUCCESS: \"true\",\n    FAILURE: \"false\"\n}\n\nexport interface Weather{\n    id:string;\n    main:string;\n    description:string;\n    icon:string;\n}\n\nexport interface Main{\n    temp: string;\n    feels_like: string;\n    temp_min: string;\n    temp_max: string;\n    pressure: string;\n    humidity: string;\n    sea_level: string;\n    grnd_level: string;\n}\n\nexport interface Wind{\n    speed:string;\n    deg:string;\n    gust:string;\n}\n\nexport interface Sys{\n    \"type\": number;\n    \"id\": number;\n    \"country\": string;\n    \"sunrise\": string;\n    \"sunset\": number;\n}\n\nexport interface WeatherRes{\n    \"dt\": number;\n    \"timezone\": number;\n    \"id\": number;\n    \"name\": string;\n    \"sys\": Sys;\n    \"wind\": Wind;\n    \"main\": Main;\n    \"weather\": Weather[];\n}\n\n\nexport const getWeatherReport = async (longtitude: Number, latitude: Number) => {\n    let data: { [k: string]: any } = {};\n    let api_id = Constants.Configs.api_id;\n    return executeAPI('weather?lat='+latitude+'&lon='+longtitude+'&appid='+api_id, APIMethods.GET, false, data);\n}\n\nconst executeAPI = async (endpoint: string, method: any, authRequired?: boolean, data?: any, params?: any) => {\n    const status = await Network.getStatus();\n    \n    if(status.connected && status.connectionType===\"wifi\"){\n        let headers: { [k: string]: any } = {};\n        if (method === APIMethods.POST || method === APIMethods.PUT) {\n            headers['Content-Type'] = 'application/x-www-form-urlencoded';\n        }\n        headers['Access-Control-Allow-Origin'] = '*';\n        headers['Access-Control-Allow-Methods'] = 'DELETE, POST, GET, OPTIONS';\n        headers['Access-Control-Allow-Headers'] = 'Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With';\n        try {\n            const response = await axios({\n                method: method,\n                url: Constants.Configs.BASE_URL + endpoint,\n                data: data,\n                headers: headers,\n                params: params\n            });\n            console.log(response.data);\n            return response.data;\n        } catch (error) {\n            return { success: false, message: 'Error Occurred in the Request!' }\n        }\n    } else {\n        alert(\"No Internet Connection\");\n    }\n    \n}\n\n"]},"metadata":{},"sourceType":"module"}