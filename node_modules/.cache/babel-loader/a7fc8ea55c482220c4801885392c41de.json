{"ast":null,"code":"import _regeneratorRuntime from\"D:/IonicProjects/weather-App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/IonicProjects/weather-App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/IonicProjects/weather-App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Redirect,Route}from'react-router-dom';import{IonApp,IonRouterOutlet,useIonViewDidEnter}from'@ionic/react';import{IonReactRouter}from'@ionic/react-router';import Home from'./pages/Home';/* Core CSS required for Ionic components to work properly */import'@ionic/react/css/core.css';/* Basic CSS for apps built with Ionic */import'@ionic/react/css/normalize.css';import'@ionic/react/css/structure.css';import'@ionic/react/css/typography.css';/* Optional CSS utils that can be commented out */import'@ionic/react/css/padding.css';import'@ionic/react/css/float-elements.css';import'@ionic/react/css/text-alignment.css';import'@ionic/react/css/text-transformation.css';import'@ionic/react/css/flex-utils.css';import'@ionic/react/css/display.css';/* Theme variables */import'./theme/variables.css';import{useEffect,useState}from'react';import{Network}from'@capacitor/network';import*as Constants from'./common/Constants';import*as Utilities from'./common/Utilities';import{Geolocation}from'@capacitor/geolocation';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showLoading=_useState2[0],setShowLoading=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),latitude=_useState4[0],setLatitude=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),longitude=_useState6[0],setLongitude=_useState6[1];useIonViewDidEnter(function(){var coordinates=Geolocation.getCurrentPosition();coordinates.then(function(data){setLatitude(data.coords.latitude);setLongitude(data.coords.longitude);});});useEffect(function(){var interval=setInterval(getWeatherData,7200000);},[longitude]);function getWeatherData(){return _getWeatherData.apply(this,arguments);}function _getWeatherData(){_getWeatherData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var status,api_id,result,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setShowLoading(true);_context.next=3;return Network.getStatus();case 3:status=_context.sent;if(!(status.connected&&status.connectionType===\"wifi\")){_context.next=13;break;}api_id=Constants.Configs.api_id;_context.next=8;return fetch(Constants.Configs.BASE_URL+'weather?lat='+latitude+'&lon='+longitude+'&appid='+api_id);case 8:result=_context.sent;_context.next=11;return result.json();case 11:data=_context.sent;Utilities.persistWeatherData(data);case 13:setShowLoading(false);case 14:case\"end\":return _context.stop();}}},_callee);}));return _getWeatherData.apply(this,arguments);}return/*#__PURE__*/_jsx(IonApp,{children:/*#__PURE__*/_jsx(IonReactRouter,{children:/*#__PURE__*/_jsxs(IonRouterOutlet,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/home\",children:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",children:/*#__PURE__*/_jsx(Redirect,{to:\"/home\"})})]})})});};export default App;","map":{"version":3,"sources":["D:/IonicProjects/weather-App/src/App.tsx"],"names":["Redirect","Route","IonApp","IonRouterOutlet","useIonViewDidEnter","IonReactRouter","Home","useEffect","useState","Network","Constants","Utilities","Geolocation","App","showLoading","setShowLoading","latitude","setLatitude","longitude","setLongitude","coordinates","getCurrentPosition","then","data","coords","interval","setInterval","getWeatherData","getStatus","status","connected","connectionType","api_id","Configs","fetch","BASE_URL","result","json","persistWeatherData"],"mappings":"sbAAA,OAASA,QAAT,CAAmBC,KAAnB,KAAgC,kBAAhC,CACA,OAASC,MAAT,CAAiBC,eAAjB,CAAkCC,kBAAlC,KAA4D,cAA5D,CACA,OAASC,cAAT,KAA+B,qBAA/B,CACA,MAAOC,CAAAA,IAAP,KAAiB,cAAjB,CAEA,6DACA,MAAO,2BAAP,CAEA,yCACA,MAAO,gCAAP,CACA,MAAO,gCAAP,CACA,MAAO,iCAAP,CAEA,kDACA,MAAO,8BAAP,CACA,MAAO,qCAAP,CACA,MAAO,qCAAP,CACA,MAAO,0CAAP,CACA,MAAO,iCAAP,CACA,MAAO,8BAAP,CAEA,qBACA,MAAO,uBAAP,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAAQC,OAAR,KAAsB,oBAAtB,CACA,MAAO,GAAKC,CAAAA,SAAZ,KAA2B,oBAA3B,CACA,MAAO,GAAKC,CAAAA,SAAZ,KAA2B,oBAA3B,CACA,OAASC,WAAT,KAA4B,wBAA5B,C,wFAEA,GAAMC,CAAAA,GAAa,CAAG,QAAhBA,CAAAA,GAAgB,EAAM,CAC1B,cAAsCL,QAAQ,CAAC,KAAD,CAA9C,wCAAOM,WAAP,eAAoBC,cAApB,eACA,eAAgCP,QAAQ,CAAC,CAAD,CAAxC,yCAAOQ,QAAP,eAAiBC,WAAjB,eACA,eAAkCT,QAAQ,CAAC,CAAD,CAA1C,yCAAOU,SAAP,eAAkBC,YAAlB,eAEAf,kBAAkB,CAAC,UAAI,CACrB,GAAMgB,CAAAA,WAAW,CAAGR,WAAW,CAACS,kBAAZ,EAApB,CACAD,WAAW,CAACE,IAAZ,CAAiB,SAAAC,IAAI,CAAE,CACrBN,WAAW,CAACM,IAAI,CAACC,MAAL,CAAYR,QAAb,CAAX,CACAG,YAAY,CAACI,IAAI,CAACC,MAAL,CAAYN,SAAb,CAAZ,CACD,CAHD,EAID,CANiB,CAAlB,CAQAX,SAAS,CAAC,UAAI,CACZ,GAAIkB,CAAAA,QAAQ,CAAGC,WAAW,CAACC,cAAD,CAAiB,OAAjB,CAA1B,CACD,CAFQ,CAEP,CAACT,SAAD,CAFO,CAAT,CAb0B,QAiBXS,CAAAA,cAjBW,oJAiB1B,iKACEZ,cAAc,CAAC,IAAD,CAAd,CADF,sBAEuBN,CAAAA,OAAO,CAACmB,SAAR,EAFvB,QAEQC,MAFR,oBAIKA,MAAM,CAACC,SAAP,EAAoBD,MAAM,CAACE,cAAP,GAAwB,MAJjD,2BAKQC,MALR,CAKiBtB,SAAS,CAACuB,OAAV,CAAkBD,MALnC,uBAMyBE,CAAAA,KAAK,CAACxB,SAAS,CAACuB,OAAV,CAAkBE,QAAlB,CAA2B,cAA3B,CAA0CnB,QAA1C,CAAmD,OAAnD,CAA2DE,SAA3D,CAAqE,SAArE,CAA+Ec,MAAhF,CAN9B,QAMUI,MANV,sCAOuBA,CAAAA,MAAM,CAACC,IAAP,EAPvB,SAOUd,IAPV,eAQIZ,SAAS,CAAC2B,kBAAV,CAA6Bf,IAA7B,EARJ,QAUER,cAAc,CAAC,KAAD,CAAd,CAVF,uDAjB0B,iDA+B1B,mBACE,KAAC,MAAD,wBACE,KAAC,cAAD,wBACE,MAAC,eAAD,yBACE,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,OAAlB,uBACE,KAAC,IAAD,IADF,EADF,cAIE,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,GAAlB,uBACE,KAAC,QAAD,EAAU,EAAE,CAAC,OAAb,EADF,EAJF,GADF,EADF,EADF,CAcD,CA7CD,CA8CA,cAAeF,CAAAA,GAAf","sourcesContent":["import { Redirect, Route } from 'react-router-dom';\nimport { IonApp, IonRouterOutlet, useIonViewDidEnter } from '@ionic/react';\nimport { IonReactRouter } from '@ionic/react-router';\nimport Home from './pages/Home';\n\n/* Core CSS required for Ionic components to work properly */\nimport '@ionic/react/css/core.css';\n\n/* Basic CSS for apps built with Ionic */\nimport '@ionic/react/css/normalize.css';\nimport '@ionic/react/css/structure.css';\nimport '@ionic/react/css/typography.css';\n\n/* Optional CSS utils that can be commented out */\nimport '@ionic/react/css/padding.css';\nimport '@ionic/react/css/float-elements.css';\nimport '@ionic/react/css/text-alignment.css';\nimport '@ionic/react/css/text-transformation.css';\nimport '@ionic/react/css/flex-utils.css';\nimport '@ionic/react/css/display.css';\n\n/* Theme variables */\nimport './theme/variables.css';\nimport { useEffect, useState } from 'react';\nimport {Network} from '@capacitor/network';\nimport * as Constants from './common/Constants';\nimport * as Utilities from './common/Utilities';\nimport { Geolocation } from '@capacitor/geolocation';\n\nconst App: React.FC = () => {\n  const [showLoading, setShowLoading] = useState(false);\n  const [latitude, setLatitude] = useState(0);\n  const [longitude, setLongitude] = useState(0);\n  \n  useIonViewDidEnter(()=>{\n    const coordinates = Geolocation.getCurrentPosition();\n    coordinates.then(data=>{\n      setLatitude(data.coords.latitude);\n      setLongitude(data.coords.longitude);\n    });\n  });\n\n  useEffect(()=>{\n    var interval = setInterval(getWeatherData, 7200000);\n  },[longitude]);\n\n  async function getWeatherData() {\n    setShowLoading(true);\n    const status = await Network.getStatus();\n    \n    if(status.connected && status.connectionType===\"wifi\"){\n      let api_id = Constants.Configs.api_id;\n      const result = await fetch(Constants.Configs.BASE_URL+'weather?lat='+latitude+'&lon='+longitude+'&appid='+api_id);\n      const data = await result.json();\n      Utilities.persistWeatherData(data);\n    }\n    setShowLoading(false);\n  }\n\n  \n  return (\n    <IonApp>\n      <IonReactRouter>\n        <IonRouterOutlet>\n          <Route exact path=\"/home\">\n            <Home />\n          </Route>\n          <Route exact path=\"/\">\n            <Redirect to=\"/home\" />\n          </Route>\n        </IonRouterOutlet>\n      </IonReactRouter>\n    </IonApp>\n  );\n}\nexport default App;\n"]},"metadata":{},"sourceType":"module"}